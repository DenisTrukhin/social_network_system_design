# System Design социальной сети для путешественников
Проект в рамках [курса по System Design](https://balun.courses/courses/system_design) 

### Функциональные требования
 - публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия;
 - оценка и комментарии постов других путешественников;
 - подписка на других путешественников, чтобы следить за их активностью;
 - поиск популярных мест для путешествий и просмотр постов с этих мест;
 - просмотр ленты других путешественников;

### Нефункциональные требования
 - DAU: 10 000 000;
 - Аудитория: СНГ;
 - Доступность: 99.95%;
 - Сезонность: есть, зависит от времени года;
 - Хранение данных: вечное;
 - Активность:
   - просматривает в ленте 30 постов в день;
   - создает 8 постов с 3 фото каждый в месяц;
   - ставит 10 реакций в день;
   - просматривает 100 комментариев в день;
   - оставляет 5 комментариев в день;
 - Лимиты:
   - до 10 постов в день;
   - до 300 символов в описании;
   - до 100 комментариев в день;
   - до 300 символов в комментарии;
   - до 5 фото на пост;
   - размер фото до 10Mb;
   - до 1 000 подписок;
   - до 1 000 постов в ленте;
 - Тайминги:
   - добавление поста - до 5с;
   - подгрузка порции постов из ленты - до 3с;
   - загрузка подборки популярных мест - до 1с;

### Оценка нагрузки

Connections = 10 000 000 * 0.1 = 1 000 000

#### Посты
id(8b) + author_id(8b) + photo(3 * 1.5Mb) + body(300b) + created_at(8b) ~ 4.5Mb 
 - **write**
   - RPS = 10 000 000 / 3.75 / 86400 = 31
   - Traffic = 31 * 4.5Mb = 139.5 Mb/s
 - **read**
   - RPS = 10 000 000 * 30 / 86400 = 3472
   - Traffic = 3472 * 4.5Mb = 15.624 Gb/s
   
#### Реакции
В среднем у поста 10 реакций
 - **write** (id (8b) + post_id (8b) + reaction_type(1b) + created_at(8b) = 25b)
   - RPS = 10 000 000 * 10 / 86400 = 1157
   - Traffic = 1157 * 25b = 28.925 Kb/s
 - **read** (post_id(8b) + (reaction_type(1b) + amount(3b)) * 10 = 48b)
   - RPS = 10 000 000 * 30 / 86400 = 3472
   - Traffic = 3472 * 48b = 166.656 Kb/s

#### Комментарии
id(8b) + post_id(8b) + author_id(8b) + body(300b) + created_at(8b) = 332b
 - **write** 
   - RPS = 10 000 000 * 5 / 86400 = 579
   - Traffic = 579 * 332b = 192.228 Kb/s
 - **read**
   - RPS = 10 000 000 * 100 / 86400 = 11574
   - Traffic = 11574 * 332b = 3.843 Mb/s